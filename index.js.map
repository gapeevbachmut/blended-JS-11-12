{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {};\n\nexport const categories = document.querySelector('.categories');\n//  отримаємо ul.categories\nexport const products = document.querySelector('.products');\n//  отримуємо ul.products\n// export const buttons = categories.querySelectorAll('.categories__btn');\n//Знаходимо всі кнопки в ul.categories\n\nexport const notFound = document.querySelector('.not-found');\n","// Функції для роботи з бекендом\n\nimport axios from 'axios';\nimport { categories } from './refs';\n\nconst BASE_URL = 'https://dummyjson.com/products'; // ???\n// const END_POINT_categories = '/categories';\nconst END_POINT_category_list = '/category-list';\n\n// const END_POINT_pagination = `?limit=12&skip=${(currentPage - 1) * 12}`;\n\nexport async function allCategoryList() {\n  const { data } = await axios(`${BASE_URL}${END_POINT_category_list}`); //  запит на сервер\n  data.unshift('All'); // Додає \"All\" в початок масиву категорій\n\n  return data;\n}\n\nexport async function getProducts(currentPage = 1) {\n  const { data } = await axios(\n    `${BASE_URL}?limit=12&skip=${(currentPage - 1) * 12}`\n  );\n  // console.log('1', data.products);\n\n  return data.products;\n}\n// https://dummyjson.com/products/category/smartphones\n//  запит на сервер ждя отримання списку по категоріях\n//  зробити запит по ендпоінту №6 підставивши в url прочитану категорію.\n//  отриманий масив обʼєктів продуктів потрібно відрендерити в списку ul.products з пагінацією 12 продуктів на сторінку\n\nexport async function getProducnsByCategory(category, currentPage = 1) {\n  const { data } = await axios(\n    `${BASE_URL}/category/${category}?limit=12&skip=${(currentPage - 1) * 12}`\n  );\n  // console.log('2', data.products);\n  console.log(category);\n\n  return data.products;\n}\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport { categories, products } from './refs';\n//  Створюю кнопку для кожної категорії\nexport function createMarkupList(data) {\n  const markupList = data\n    .map(\n      category =>\n        `\n    <li class=\"categories__item\">\n      <button class=\"categories__btn\" type=\"button\">${category}</button>\n    </li>\n    `\n    )\n    .join('');\n  categories.insertAdjacentHTML('beforeend', markupList);\n}\n\nexport function createMarkupProducts(data) {\n  const markupProducts = data\n    .map(\n      (\n        { id, thumbnail, title, brand, category, price } // деструктуруємо product\n      ) =>\n        `\n    <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price} $</p>\n </li>\n\n    `\n    )\n    .join('');\n  products.insertAdjacentHTML('beforeend', markupProducts);\n}\n","// Функції, які передаються колбеками в addEventListners\n\nimport { products, notFound } from './refs'; // елемент розмітки\nimport { getProducts, getProducnsByCategory } from './products-api';\nimport { createMarkupProducts } from './render-function'; // розмітка\n\nlet currentPage = 1;\n\nexport async function handleClickCategoryBtn(event) {\n  //делегування на списку ul.categories\n  // Перевірка: натиснута саме кнопка\n  if (!event.target.classList.contains('categories__btn')) {\n    console.log('not a btn');\n    return;\n  }\n  const clickedElement = event.target; // елемент на який клікнули\n\n  const category = event.target.textContent;\n\n  // запам`ятати активну категорію\n\n  /////////////////////////////\n  //  при кліку на одну з кнопок .categories__btn, треба:\n  // Зняти клас categories__btn--active з усіх кнопок (є тільки один активний).  Додати цей клас до тієї кнопки, яку натиснули.\n  //Очистити активні класи з усіх кнопок. шукає по ВСІЙ сторінці,\n  document\n    .querySelectorAll('.categories__btn--active')\n    .forEach(btn => btn.classList.remove('categories__btn--active'));\n  // Додати клас активності до нової кнопки\n  clickedElement.classList.add('categories__btn--active');\n  /////////////////////\n\n  products.innerHTML = ''; // очищаємо список, якщо він був\n  currentPage = 1; //  початок з першої сторінки\n\n  let items;\n  try {\n    if (category === 'All') {\n      items = await getProducts(currentPage);\n    } else {\n      items = await getProducnsByCategory(category, currentPage);\n    }\n    // Якщо товарів немає — показати повідомлення\n    if (!items.length) {\n      notFound.classList.add('not-found--visible');\n\n      return;\n    } else {\n      notFound.classList.remove('not-found--visible');\n    }\n    // console.log('items', items);\n\n    //\n    createMarkupProducts(items);\n    //\n\n    //\n  } catch (error) {\n    console.log(error);\n  }\n\n  // getProducnsByCategory(category);\n  // при кліку виводится назва кнопки\n  // при кліку в обрану категорію потрібно прочитати текстовий контент кнопки\n  // console.log('category', category);\n}\n","//Логіка сторінки Home\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { handleClickCategoryBtn } from './js/handlers';\nimport { categories } from './js/refs';\nimport {\n  allCategoryList,\n  getProducts,\n  getProducnsByCategory,\n} from './js/products-api';\nimport { createMarkupList, createMarkupProducts } from './js/render-function';\n\ncategories.addEventListener('click', handleClickCategoryBtn);\n\nlet currentPage = 1;\n\nasync function initPage() {\n  try {\n    const data = await allCategoryList();\n    console.log(data); //отримаємо масив значень  - список усіх категорій\n    createMarkupList(data);\n\n    const products = await getProducts();\n    // createMarkupProducts(products); // за замовчуванням відображає перші товари\n    // console.log('3', products);\n\n    //  отриманий масив обʼєктів продуктів потрібно відрендерити в списку ul.products з пагінацією 12 продуктів на сторінку\n\n    //  це нічого не робить\n    // const productsOfCategory = await getProducnsByCategory();\n    // createMarkupProducts(productsOfCategory);\n    //\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: error.message,\n    });\n  }\n}\ninitPage();\n\n//\n//\n/////////////////////////////////////////////\n//\n//\n//\n//до кнопки обраної категорії потрібно додати клас categories__btn--active , щоб стилізувати її активною.\n"],"names":["categories","products","notFound","BASE_URL","END_POINT_category_list","allCategoryList","data","axios","getProducts","currentPage","getProducnsByCategory","category","createMarkupList","markupList","createMarkupProducts","markupProducts","id","thumbnail","title","brand","price","handleClickCategoryBtn","event","clickedElement","btn","items","error","initPage","iziToast"],"mappings":"2FAIO,MAAMA,EAAa,SAAS,cAAc,aAAa,EAEjDC,EAAW,SAAS,cAAc,WAAW,EAK7CC,EAAW,SAAS,cAAc,YAAY,ECNrDC,EAAW,iCAEXC,EAA0B,iBAIzB,eAAeC,GAAkB,CACtC,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,GAAGJ,CAAQ,GAAGC,CAAuB,EAAE,EACpE,OAAAE,EAAK,QAAQ,KAAK,EAEXA,CACT,CAEO,eAAeE,EAAYC,EAAc,EAAG,CACjD,KAAM,CAAE,KAAAH,CAAM,EAAG,MAAMC,EACrB,GAAGJ,CAAQ,mBAAmBM,EAAc,GAAK,EAAE,EACvD,EAGE,OAAOH,EAAK,QACd,CAMO,eAAeI,EAAsBC,EAAUF,EAAc,EAAG,CACrE,KAAM,CAAE,KAAAH,CAAM,EAAG,MAAMC,EACrB,GAAGJ,CAAQ,aAAaQ,CAAQ,mBAAmBF,EAAc,GAAK,EAAE,EAC5E,EAEE,eAAQ,IAAIE,CAAQ,EAEbL,EAAK,QACd,CCnCO,SAASM,EAAiBN,EAAM,CACrC,MAAMO,EAAaP,EAChB,IACCK,GACE;AAAA;AAAA,sDAE8CA,CAAQ;AAAA;AAAA,KAGzD,EACA,KAAK,EAAE,EACVX,EAAW,mBAAmB,YAAaa,CAAU,CACvD,CAEO,SAASC,EAAqBR,EAAM,CACzC,MAAMS,EAAiBT,EACpB,IACC,CACE,CAAE,GAAAU,EAAI,UAAAC,EAAW,MAAAC,EAAO,MAAAC,EAAO,SAAAR,EAAU,MAAAS,CAAO,IAEhD;AAAA,0CACkCJ,CAAE;AAAA,wCACJC,CAAS,UAAUC,CAAK;AAAA,iCAC/BA,CAAK;AAAA,2EACqCC,CAAK;AAAA,8CAClCR,CAAQ;AAAA,wCACdS,CAAK;AAAA;AAAA;AAAA,KAIxC,EACA,KAAK,EAAE,EACVnB,EAAS,mBAAmB,YAAac,CAAc,CACzD,CC/BA,IAAIN,EAAc,EAEX,eAAeY,EAAuBC,EAAO,CAGlD,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,iBAAiB,EAAG,CACvD,QAAQ,IAAI,WAAW,EACvB,MACD,CACD,MAAMC,EAAiBD,EAAM,OAEvBX,EAAWW,EAAM,OAAO,YAQ9B,SACG,iBAAiB,0BAA0B,EAC3C,QAAQE,GAAOA,EAAI,UAAU,OAAO,yBAAyB,CAAC,EAEjED,EAAe,UAAU,IAAI,yBAAyB,EAGtDtB,EAAS,UAAY,GACrBQ,EAAc,EAEd,IAAIgB,EACJ,GAAI,CAOF,GANId,IAAa,MACfc,EAAQ,MAAMjB,EAAYC,CAAW,EAErCgB,EAAQ,MAAMf,EAAsBC,EAAUF,CAAW,EAGtDgB,EAAM,OAKTvB,EAAS,UAAU,OAAO,oBAAoB,MAL7B,CACjBA,EAAS,UAAU,IAAI,oBAAoB,EAE3C,MACN,CAMIY,EAAqBW,CAAK,CAI3B,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAMH,CCnDA1B,EAAW,iBAAiB,QAASqB,CAAsB,EAI3D,eAAeM,GAAW,CACxB,GAAI,CACF,MAAMrB,EAAO,MAAMD,IACnB,QAAQ,IAAIC,CAAI,EAChBM,EAAiBN,CAAI,EAErB,MAAML,EAAW,MAAMO,GAUxB,OAAQkB,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBE,EAAS,MAAM,CACb,MAAOF,EAAM,OACnB,CAAK,CACF,CACH,CACAC"}