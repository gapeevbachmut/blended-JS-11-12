import"./assets/styles-BrE9sqBu.js";import{a as u,i as J}from"./assets/vendor-4yCzdkXl.js";const M=document.querySelector(".categories"),a=document.querySelector(".products"),n=document.querySelector(".not-found"),r=document.querySelector(".load-more-btn"),f=document.querySelector(".modal"),D=document.querySelector(".modal-product"),T=document.querySelector(".modal__close-btn"),K=document.querySelector(".modal__content"),U=document.querySelector(".search-form"),h=document.querySelector(".search-form__input"),g=document.querySelector(".search-form__btn-clear"),Y=document.querySelector("[data-cart-count]"),z=document.querySelector("[data-wishlist-count]");document.querySelector(".theme-toggle-btn");const m="https://dummyjson.com/products",G="/category-list";async function Q(){const{data:t}=await u(`${m}${G}`);return t.unshift("All"),t}async function _(t=1){const{data:e}=await u(`${m}?limit=12&skip=${(t-1)*12}`);return e.products}async function W(t,e=1){const{data:o}=await u(`${m}/category/${t}?limit=12&skip=${(e-1)*12}`);return o.products}async function S(t){const{data:e}=await u.get(`${m}/${t}`);return console.log(e),e}async function V(t,e=1){const{data:o}=await u.get(`${m}/search?q=${encodeURIComponent(t)}&limit=12&skip=${(e-1)*12}`);return o.products}const k="cart",X="wishlist";function p(){const t=localStorage.getItem(k);return t?JSON.parse(t):[]}function Z(t){const e=p();e.includes(t)||(e.push(t),localStorage.setItem(k,JSON.stringify(e)))}function tt(t){const e=p().filter(o=>o!==t);localStorage.setItem(k,JSON.stringify(e))}function x(t){return p().includes(t)}function y(){const t=p();Y.textContent=t.length}function w(){const t=localStorage.getItem(X);return t?JSON.parse(t):[]}function et(t){return w().includes(t)}function E(){const t=w();z.textContent=t.length}function ot(t){const e=t.map(o=>`
    <li class="categories__item">
      <button class="categories__btn" type="button">${o}</button>
    </li>
    `).join("");M.insertAdjacentHTML("beforeend",e)}function d(t){const e=t.map(({id:o,thumbnail:s,title:c,brand:l,category:b,price:v})=>`
    <li class="products__item" data-id="${o}">
    <img class="products__image" src="${s}" alt="${c}"/>
    <p class="products__title">${c}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${l}</span></p>
    <p class="products__category">Category: ${b}</p>
    <p class="products__price">Price: ${v} $</p>
 </li>

    `).join("");a.insertAdjacentHTML("beforeend",e)}function st(t){const{id:e,title:o,description:s,price:c,images:l,tags:b=[],shipping:v="Free shipping available",returnPolicy:N="30-day return"}=t,R=x(e),j=et(e),F=`
  <div class="modal-product" data-id="${e}">
    <img class="modal-product__img" src="${(l==null?void 0:l[0])||""}" alt="${o}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${o}</p>
      <ul class="modal-product__tags">
        ${b.map(O=>`<li>${O}</li>`).join("")}
      </ul>
      <p class="modal-product__description">${s}</p>
      <p class="modal-product__shipping-information">Shipping: ${v}</p>
      <p class="modal-product__return-policy">Return Policy: ${N}</p>
      <p class="modal-product__price">Price: $${c}</p>
      <div class="modal-product__actions">
          <button class="modal-product__btn modal-product__btn--wishlist" type="button">
            ${j?"Remove from Wishlist":"Add to Wishlist"}
          </button>
          <button class="modal-product__btn modal-product__btn--cart" type="button">
            ${R?"Remove from Cart":"Add to Cart"}
          </button>
        </div>
    </div>
  </div>
  `;D.innerHTML=F}function nt(){f.classList.add("modal--is-open"),document.addEventListener("keydown",A),f.addEventListener("click",B),T.addEventListener("click",L)}function L(){f.classList.remove("modal--is-open"),document.removeEventListener("keydown",A),f.removeEventListener("click",B),T.removeEventListener("click",L)}function A(t){t.key==="Escape"&&L()}function B(t){K.contains(t.target)||L()}let i=1,$;async function ct(t){const e=t.target;if(!t.target.classList.contains("categories__btn")){console.log("not a btn");return}const o=t.target.textContent;$=o,document.querySelectorAll(".categories__btn--active").forEach(c=>c.classList.remove("categories__btn--active")),e.classList.add("categories__btn--active"),a.innerHTML="",i=1;let s=[];try{if(o==="All"?s=await _(i):s=await W(o,i),s.length)n.classList.remove("not-found--visible");else{n.classList.add("not-found--visible"),r.classList.add("hidden");return}console.log("btn-category",s),d(s),s.length===12?r.classList.remove("hidden"):r.classList.add("hidden")}catch(c){console.log(c)}}async function rt(){i+=1;try{let t=[];if($==="All"?t=await _(i):t=await W($,i),!t.length){r.classList.add("hidden");return}d(t),console.log("btn-load-More",t),t.length<12&&r.classList.add("hidden")}catch(t){console.error(t)}}async function at(t){const e=t.target.closest(".products__item");if(!e)return;const o=e.dataset.id;if(o)try{const s=await S(o);st(s),nt()}catch(s){console.error("Error loading product",s)}}async function it(t){t.preventDefault();const e=h.value.trim();if(e)try{const o=await V(e,1);a.innerHTML="",o.length?(d(o),n.classList.remove("not-found--visible"),r.classList.add("hidden")):(n.classList.add("not-found--visible"),r.classList.add("hidden"))}catch(o){console.error("Search error",o)}}async function dt(){h.value="",g.classList.add("hidden");try{const t=await _(1);a.innerHTML="",t.length?(d(t),n.classList.remove("not-found--visible"),r.classList.remove("hidden")):n.classList.add("not-found--visible")}catch(t){console.error("Clear search error",t)}}function q(t){const e=t.target,o=Number(e.closest(".modal-product").dataset.id);o&&(x(o)?(tt(o),e.textContent="Add to Cart"):(Z(o),e.textContent="Remove from Cart"),y())}function H(t){const e=t.target,o=Number(e.closest(".modal-product").dataset.id);o&&(isInWishlist(o)?(removeFromWishlist(o),e.textContent="Add to Wishlist"):(addToWishlist(o),e.textContent="Remove from Wishlist"),updateWishlistCounter())}y();E();ut();mt();const P=document.querySelector("[data-cart-items]"),I=document.querySelector("[data-cart-total]");document.querySelector(".cart-summary__btn");const C=document.querySelector(".loader");document.querySelector(".scroll-up-btn");M.addEventListener("click",ct);a.addEventListener("click",at);r.addEventListener("click",rt);U.addEventListener("submit",it);g.addEventListener("click",dt);h.addEventListener("input",()=>{h.value.trim()?g.classList.remove("hidden"):g.classList.add("hidden")});document.addEventListener("click",t=>{t.target.classList.contains("modal-product__btn--cart")&&q(t)});document.addEventListener("click",t=>{t.target.classList.contains("modal-product__btn--wishlist")&&H(t),t.target.classList.contains("modal-product__btn--cart")&&q(t)});document.addEventListener("click",t=>{t.target.classList.contains("modal-product__btn--cart")&&q(t),t.target.classList.contains("modal-product__btn--wishlist")&&H(t)});async function lt(){try{const t=await Q();console.log(t),ot(t);const e=await _()}catch(t){console.log(t),J.error({title:t.message})}}lt();async function ut(){const t=w();if(a.innerHTML="",!t.length){n.classList.add("not-found--visible");return}try{const e=t.map(s=>S(s)),o=await Promise.all(e);d(o),n.classList.remove("not-found--visible")}catch(e){console.error("Error loading wishlist:",e),n.classList.add("not-found--visible")}y(),E()}async function mt(){const t=p();if(a.innerHTML="",n.classList.remove("not-found--visible"),P.textContent="0",I.textContent="$0",C.classList.remove("hidden"),!t.length){n.classList.add("not-found--visible"),C.classList.add("hidden");return}try{const e=t.map(s=>S(s)),o=await Promise.all(e);d(o),P.textContent=o.length,I.textContent="$"+o.reduce((s,c)=>s+c.price,0),y(),E()}catch(e){console.error("Cart error:",e),n.classList.add("not-found--visible")}finally{C.classList.add("hidden")}}
//# sourceMappingURL=index.js.map
